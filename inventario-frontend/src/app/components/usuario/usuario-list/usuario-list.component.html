<div class="container mt-5">
    
    <div class="d-flex align-items-center gap-3 mb-4">
        <button mat-icon-button class="bg-white shadow-sm text-dark" routerLink="/">
            <mat-icon>arrow_back</mat-icon>
        </button>

        <div>
            <h6 class="text-uppercase text-muted mb-1" style="font-size: 0.8rem; letter-spacing: 1px;">Módulo de Administración</h6>
            <h2 class="fw-bold text-dark m-0">Gestión de Usuarios</h2>
        </div>

        <div class="d-flex align-items-end ms-auto">
            <button mat-raised-button color="primary" class="rounded-pill px-4 btn-nuevo" (click)="abrirFormulario()">
                <mat-icon class="me-2">library_add</mat-icon> Nuevo Usuario
            </button>
        </div>
    </div>

    <mat-card class="custom-card">
        <table mat-table [dataSource]="dataSource" class="w-100">
            
            <ng-container matColumnDef="id">
                <th mat-header-cell *matHeaderCellDef>ID</th>
                <td mat-cell *matCellDef="let element" class="text-secondary">#{{element.idUsuario}} </td>
            </ng-container>

            <ng-container matColumnDef="nombre">
                <th mat-header-cell *matHeaderCellDef>USUARIO</th>
                <td mat-cell *matCellDef="let element"> 
                    <div class="d-flex align-items-center justify-content-center">
                        <div class="bg-light rounded-circle d-flex align-items-center justify-content-center me-3" 
                             style="width: 35px; height: 35px; color: #5c6bc0;">
                            <mat-icon style="font-size: 20px; width: 20px; height: 20px;">person</mat-icon>
                        </div>
                        <span class="fw-bold">{{element.nombreusuario}}</span>
                    </div>
                </td>
            </ng-container>

            <ng-container matColumnDef="rol">
                <th mat-header-cell *matHeaderCellDef>ROL</th>
                <td mat-cell *matCellDef="let element"> 
                    <span class="badge-soft" 
                          [ngClass]="obtenerClaseRol(element.rol.nombrerol)">
                        {{element.rol.nombrerol}}
                    </span>
                </td>
            </ng-container>

            <ng-container matColumnDef="acciones">
                <th mat-header-cell *matHeaderCellDef>ACCIONES</th>
                <td mat-cell *matCellDef="let element">
                    <button mat-icon-button color="primary" class="action-btn" matTooltip="Editar">
                        <mat-icon>edit_note</mat-icon> </button>
                    <button mat-icon-button color="warn" class="action-btn" matTooltip="Eliminar">
                        <mat-icon>delete_outline</mat-icon> </button>
                </td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns;" class="hover-row"></tr>
    
            <tr class="mat-row" *matNoDataRow>
                <td class="mat-cell text-center py-5" colspan="4">
                    <div class="d-flex flex-column align-items-center justify-content-center text-muted">
                        <mat-icon style="font-size: 40px; width: 40px; height: 40px;" class="mb-2">search_off</mat-icon>
                        <span>No se encontraron usuarios</span>
                    </div>
                </td>
            </tr>
        </table>
        
        <mat-paginator [pageSizeOptions]="[10, 25, 50]" showFirstLastButtons></mat-paginator>
    </mat-card>
</div>