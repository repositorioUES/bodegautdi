<div class="login-wrapper">
    
    <div class="decorative-shape shape-left"></div>
    <div class="decorative-shape shape-right"></div>

    <div class="login-container">
        
        <div class="text-center mb-4">
            <div class="logo-box mx-auto mb-3">
                <mat-icon class="logo-icon">warehouse_outline</mat-icon>
            </div>
            <h1 class="login-title">Bienvenido</h1>
            <p class="login-subtitle">Ingresa al Sistema de Inventario</p>
        </div>

        <form [formGroup]="loginForm" (ngSubmit)="onSubmit()" class="login-form">
            
            <div class="form-group mb-3">
                <label for="user" class="form-label">Usuario</label>
                <input 
                    id="user" 
                    type="text" 
                    class="custom-input" 
                    formControlName="nombreusuario"
                    placeholder="Ej. nombre.apellido"
                    [class.input-error]="loginForm.get('nombreusuario')?.invalid && loginForm.get('nombreusuario')?.touched">
                
                @if (loginForm.get('nombreusuario')?.hasError('required') && loginForm.get('nombreusuario')?.touched) {
                    <span class="error-msg">El usuario es requerido</span>
                }
            </div>

            <div class="form-group mb-4">
                <label for="pass" class="form-label">Contraseña</label>
                <div class="password-wrapper">
                    <input 
                        id="pass" 
                        [type]="hidePassword ? 'password' : 'text'" 
                        class="custom-input" 
                        formControlName="passwordusuario"
                        placeholder="••••••••"
                        [class.input-error]="loginForm.get('passwordusuario')?.invalid && loginForm.get('passwordusuario')?.touched">
                    
                    <button type="button" class="toggle-pass" (click)="hidePassword = !hidePassword">
                        <mat-icon>{{ hidePassword ? 'visibility_off' : 'visibility' }}</mat-icon>
                    </button>
                </div>

                @if (loginForm.get('passwordusuario')?.hasError('required') && loginForm.get('passwordusuario')?.touched) {
                    <span class="error-msg">La contraseña es requerida</span>
                }
            </div>

            <button mat-flat-button class="btn-block btn-login" 
                    [disabled]="loginForm.invalid || isLoading">
                @if (isLoading) {
                    <span class="spinner-border spinner-border-sm me-2"></span> Ingresando...
                } @else {
                    INGRESAR
                }
            </button>

            <div class="text-center mt-4">
                <p class="text-muted small">¿No tienes cuenta? Contacta al administrador.</p>
            </div>

        </form>
    </div>

    <div class="footer-copyright">
        © 2026 Sistema Inventario UTDI. Todos los derechos reservados ®
    </div>
</div>